<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>App</title>
    <link rel="stylesheet" href="css/main.css" />

    <!-- Font Awesome CDN -->
    <script
      src="https://kit.fontawesome.com/9d7bdce75a.js"
      crossorigin="anonymous"
    ></script>
  </head>
  <body>
    <nav class="app-navbar">
      <h1 class="app-navbar__logo-text">furnita</h1>
      <ul class="app-navbar__links">
        <li class="app-navbar__links--items">
          <a href="/shop.html">
            <i class="fa-solid fa-2x fa-shop"></i>
          </a>
        </li>
        <li class="app-navbar__links--items">
          <a class="app-nav-links__items" href="/cart.html">
            <i class="fa-solid fa-2x fa-cart-shopping"></i>
            <p
              id="cart-items-length"
              class="app-nav-links__items--cart-items-length"
            >
              0
            </p>
          </a>
        </li>
        <li class="app-navbar__links--items">
          <a href="/user_account.html">
            <i class="fa-solid fa-2x fa-user"></i>
          </a>
        </li>
      </ul>
    </nav>
    <section id="loading-screen" class="loading__screen">
      <div class="loading__container">
        <div class="loading__visible loading__spinner"></div>
        <img
          src="img/Furnita-logo.png"
          alt="furnita logo"
          class="loading__logo"
        />
      </div>
    </section>

    <section id="app-main" class="app-main">
      <h1 id="user-greeting" class="app-main__greeting">
        Good Morning, Patrick.
      </h1>

      <div class="app-main__features">
        <div class="app-main__features--header">
          <div class="app-main__features--icon">
            <i class="fa-solid fa-3x fa-pen-to-square"></i>
          </div>
          <h2 class="app-main__features--heading">Subscription Plans</h2>
        </div>
        <p class="app-main__features--text">
          Lorem ipsum dolor sit amet consectetur adipisicing elit. Dolores iure
          impedit cupiditate, similique, ipsam animi quos, asperiores eveniet ex
          expedita sunt facilis eos a molestiae exercitationem magni quis at
          eum?
        </p>
        <a href="subscription_plans.html" class="btn app-main__features--btn">
          <i class="fa-solid fa-arrow-up-right-from-square"></i>
          <p>View Subscription Plans</p>
        </a>
      </div>

      <div class="app-main__features">
        <div class="app-main__features--header">
          <div class="app-main__features--icon">
            <i class="fa-solid fa-3x fa-shop"></i>
          </div>
          <h2 class="app-main__features--heading">Online Shop</h2>
        </div>
        <p class="app-main__features--text">
          Lorem ipsum dolor sit amet consectetur adipisicing elit. Dolores iure
          impedit cupiditate, similique, ipsam animi quos, asperiores eveniet ex
          expedita sunt facilis eos a molestiae exercitationem magni quis at
          eum?
        </p>
        <a href="shop.html" class="btn app-main__features--btn">
          <i class="fa-solid fa-arrow-up-right-from-square"></i>
          <p>Visit Our Online Shop</p>
        </a>
      </div>
    </section>
    <script>
      const cart = JSON.parse(localStorage.getItem("cart")) || [];
      const userData = JSON.parse(localStorage.getItem("userData")) || {};

      const totalCartItems = document.getElementById("cart-items-length");
      const greeting = document.getElementById("user-greeting");

      // loading selectors
      const loadingScreen = document.getElementById("loading-screen");
      const appMain = document.getElementById("app-main");

      // loading
      setTimeout(() => {
        loadingScreen.remove();

        appMain.classList.remove("loading__hidden");
        appMain.classList.add("loading__visible");
      }, 3000);

      greeting.innerHTML = `Welcome, ${userData.firstName}. ðŸŽ‰`;

      cart == []
        ? (totalCartItems.innerHTML = "0")
        : (totalCartItems.innerHTML = `${cart.length}`);
    </script>
  </body>
</html>
